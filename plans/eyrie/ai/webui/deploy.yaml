---
description: 'Deploy an Open WebUI instance'

parameters:
  service:
    description: 'Open WebUI service to deploy'
    type: String
    default: 'open-webui'

  namespace:
    description: 'Kubernetes namespace'
    type: String
    default: 'ai'

  deploy:
    description: 'Run or skip the deployment'
    type: Boolean
    default: true

  init:
    description: 'Deploy initial revision'
    type: Boolean
    default: false

  render_to:
    description: 'Just render the template'
    type: String
    default: ''

steps:
  - description: 'Deploy the instance'
    plan: nest::kubernetes::deploy
    parameters:
      namespace: $namespace
      service: $service
      app: 'open-webui'
      chart: 'open-webui/open-webui'
      repo_url: 'https://helm.openwebui.com/'
      version: '8.22.0'
      deploy: $deploy
      init: $init
      wait: $init
      render_to: $render_to

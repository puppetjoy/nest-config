---
description: 'Initialize a GitLab instance'

parameters:
  namespace:
    description: 'Kubernetes namespace'
    type: String
    default: 'default'

  service:
    description: 'GitLab service to restore'
    type: String
    default: 'gitlab'

  service_name:
    description: 'Service name (unused)'
    type: String
    default: 'unused'

  init:
    description: 'Run or skip initialization'
    type: Boolean
    default: true

steps:
  - description: "Restore GitLab instance"
    plan: nest::eyrie::gitlab::restore
    parameters:
      namespace: $namespace
      service: $service
      restore: $init

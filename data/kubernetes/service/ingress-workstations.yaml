---
service_name: ingress-workstations
class_name: contour-workstation
node_role: workstation

.affinity: &affinity
  nodeAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      nodeSelectorTerms:
        - matchExpressions:
          - key: "node-role.kubernetes.io/%{lookup('node_role')}"
            operator: Exists

.tolerations: &tolerations
  - key: "node-role.kubernetes.io/%{lookup('node_role')}"
    operator: Exists
    effect: NoSchedule

values:
  contour:
    affinity: *affinity
    tolerations: *tolerations
  envoy:
    affinity: *affinity
    tolerations: *tolerations
    resources:
      requests:
        cpu: "500m"
        memory: "512Mi"
      limits:
        cpu: "2000m"
        memory: "2048Mi"

---
node_role: storage

resources:
  registry_auths: {}
  backup: {}

values:
  nodeSelector:
    "node-role.kubernetes.io/%{lookup('node_role')}": ''
  tolerations: &tolerations
    - key: "node-role.kubernetes.io/%{lookup('node_role')}"
      operator: Exists
      effect: NoSchedule
  csi:
    # Drop unrealistic resource requests
    csiRBDProvisionerResource: '[]'
    csiRBDPluginResource: '[]'
    csiCephFSProvisionerResource: '[]'
    csiCephFSPluginResource: '[]'
    csiNFSProvisionerResource: '[]'
    csiNFSPluginResource: '[]'

    provisionerTolerations: *tolerations
    provisionerNodeAffinity: "node-role.kubernetes.io/%{lookup('node_role')}"

    # Allow Ceph on workstations
    pluginTolerations:
      - key: 'node-role.kubernetes.io/workstation'
        operator: Exists
        effect: NoSchedule

  obcAllowAdditionalConfigFields: 'maxObjects,maxSize,bucketMaxObjects,bucketMaxSize,bucketPolicy,bucketLifecycle,bucketOwner'

  monitoring:
    enabled: true

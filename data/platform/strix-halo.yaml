---
nest::classes:
  - 'nest::service::power'
  - 'nest::tool::rocm'

nest::kernel_config:
  # Architecture options (especially for HSA_AMD_SVM)
  CONFIG_MEMORY_HOTPLUG: y
  CONFIG_MEMORY_HOTREMOVE: y
  CONFIG_ZONE_DEVICE: y
  CONFIG_DEVICE_PRIVATE: y

  # Device drivers
  CONFIG_DRM_AMDGPU: m
  CONFIG_HSA_AMD: y
  CONFIG_HSA_AMD_SVM: y
  CONFIG_SND_HDA_INTEL: m
  CONFIG_SND_HDA_CODEC_REALTEK: m
  CONFIG_SND_HDA_CODEC_HDMI: m
  CONFIG_USB4: m

  # For platform profile selection
  CONFIG_AMD_SFH_HID: m
  CONFIG_AMD_PMF: m
  CONFIG_AMD_PMC: m
  CONFIG_TEE: m
  CONFIG_CRYPTO_DEV_CCP: y
